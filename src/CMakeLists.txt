add_library(subspace OBJECT filters.f90 covariance.f90 subspace.f90 signals.f90 perf.f90)
if(f2018random_init)
  target_sources(subspace PRIVATE comm.f90)
else()
  target_sources(subspace PRIVATE comm_legacy.f90)
endif()
target_link_libraries(subspace PRIVATE ${LAPACK_LIBRARIES})
set_target_properties(subspace PROPERTIES Fortran_MODULE_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/include)
target_include_directories(subspace INTERFACE ${CMAKE_CURRENT_BINARY_DIR}/include)

add_library(subspace::subspace ALIAS subspace)